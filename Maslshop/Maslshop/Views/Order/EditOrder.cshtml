@model Maslshop.Models.ViewModels.Order.EditOrderFormViewModel

@{


    ViewBag.Title = Model.Heading;
}

<h2>@Model.Heading</h2>

@using (Html.BeginForm("EditOrder", "Order", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => Model.OrderId)
    @Html.ValidationSummary("", new { @class = "text-danger" })

    <div class="form-group">
        @Html.LabelFor(m => m.Name, "Imię")
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control", placeholder = @Model.Name })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Surname, "Nazwisko")
        @Html.TextBoxFor(m => m.Surname, new { @class = "form-control", placeholder = @Model.Surname })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Address, "Adres")
        @Html.TextBoxFor(m => m.Address, new { @class = "form-control", placeholder = @Model.Address })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.PostCode, "Kod Pocztowy")
        @Html.TextBoxFor(m => m.PostCode, new { @class = "form-control", placeholder = @Model.PostCode })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.City, "Miasto")
        @Html.TextBoxFor(m => m.City, new { @class = "form-control", placeholder = @Model.City })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.StatusId, "Status Zamówienia")
        @Html.DropDownListFor(m => Model.StatusId, new SelectList(Model.OrderStats, "Id", "Status"), "", new { @class = "form-control" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.OrderDetails, "Zamówione przedmioty")
        <div id="ProductsList">
            <table id="table" class="table table-striped table-bordered text-center">
                <thead>
                <tr class="active text-info">
                    <th>Id</th>
                    <th>Nazwa</th>
                    <th>Cena</th>
                    <th>Ilość</th>
                    <th>Cena łączna</th>
                    <th>Usuń</th>
                </tr>
                </thead>
                <tbody class="text-center">

                @foreach (var product in Model.OrderDetails)
                {
                    var subtotal = @product.Price * @product.Quantity;

                    <tr>
                        <td>@product.ProductId</td>
                        <td>@product.Product.Name</td>
                        <td>@product.Price.ToString("C")</td>
                        <td>@product.Quantity</td>
                        <td>@subtotal.ToString("C")</td>
                        <td><a href="@Url.Action("DeleteOrderDetailEntry", "Order", new {orderDetailId = product.OrderDetailId})" class="btn btn-primary" role="button">Usuń</a></td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    </div>

    <button type="submit" class="btn btn-primary btn-lg">Zapisz</button>
}