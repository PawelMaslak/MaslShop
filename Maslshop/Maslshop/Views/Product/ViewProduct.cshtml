@using System.Activities.Statements
@model Maslshop.Models.ViewModels.ProductsViewModel

@{
    ViewBag.Title = "Kup produkt - " + Model.Name;
}

<div class="row">
    <div class="col-sm-2">
        <ul class="list-group">
            <li class="list-group-item">Kategorie</li>
            @foreach (var category in Model.Categories)
            {

                <li class="list-group-item"><a href="@Url.Action("Index", "Home", new {query = category.Name} )">@category.Name</a><span class="badge">@category.Products.Count</span></li>

            }
        </ul>
    </div>

    <div class="col-sm-10">
        <h2 align="center">@Model.Heading</h2>
        <hr />
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-4">
                <div class="product-images">                 
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
                    <!-- Trigger the Modal -->                   
                    @if (Model.Files != null && Model.Files.Count > 0)
                    {
                        <img src="~/Content/Images/@Model.Files[0].FileName" alt="@Model.Name" title="@Model.Name" class="myImg img-responsive" />
                    }
                    @if (Model.Files != null && Model.Files.Count > 1)
                    {
                        <img src="~/Content/Images/@Model.Files[1].FileName" alt="@Model.Name" title="@Model.Name" class="myImg img-responsive" />
                    }
                    @if (Model.Files != null && Model.Files.Count > 2)
                    {
                        <img src="~/Content/Images/@Model.Files[2].FileName" alt="@Model.Name" title="@Model.Name" class="myImg img-responsive" />
                    }
                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                        <!-- The Close Button -->
                        <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>
                        <!-- Modal Content (The Image) -->
                        <img class="modal-content" id="img01">
                        <!-- Modal Caption (Image Text) -->
                        <div id="caption"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-5 col-sm-8">
                <div align="center">
                    <p>Nazwa: @Model.Name</p>
                    <p>Materiał: @Model.CategoryName</p>
                    <p>Rok produkcji: @Model.Year</p>
                    <p>Wymiary: @Model.Dimensions</p>
                    <p>Opis: @Model.Description</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-md-offset-0 col-sm-10 col-sm-offset-1">
                <p align="center">Cena: @Model.Price.ToString("C")</p>
                <p>
                    <a class="btn2 btn-primary center-block" href="@Url.Action("Index", "Home")">Dodaj do koszyka</a>
                </p>
            </div>
        </div>
    </div>
</div>


<script>

    // Get the modal
    var modal = document.getElementById('myModal');

// Get the image and insert it inside the modal - use its "alt" text as a caption
    var img = $('.myImg');
    var modalImg = $("#img01");
    var captionText = document.getElementById("caption");
    $('.myImg').click(function(){
        modal.style.display = "block";
        var newSrc = this.src;
        modalImg.attr('src', newSrc);
        captionText.innerHTML = this.alt;
    });

// Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }
</script>